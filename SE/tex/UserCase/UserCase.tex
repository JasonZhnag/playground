% Koko
\documentclass[black,normal,cn]{elegantnote}
\usepackage{array}
\usepackage{courier}
\usepackage{xcolor}
\usepackage{tabulary}
\usepackage{float}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{zhnumber}

\definecolor{light-gray}{gray}{0.95}
\newcommand{\code}[1]{\colorbox{light-gray}{\texttt{#1}}}
\newfontfamily\courier{Courier New}
\lstset{linewidth=1.1\textwidth,
	numbers=left,
	basicstyle=\small\courier,
	numberstyle=\tiny\courier,
	keywordstyle=\color{blue}\courier,
	commentstyle=\it\color[cmyk]{1,0,1,0}\courier, 
	stringstyle=\it\color[RGB]{128,0,0}\courier,
	frame=single,
	backgroundcolor=\color[RGB]{245,245,244},
	breaklines,
	extendedchars=false, 
	xleftmargin=2em,xrightmargin=2em, aboveskip=1em,
	tabsize=4, 
	showspaces=false
	basicstyle=\small\courier
}
\title{分布式温控系统用例模型}
\version{1.1.1}
\date{\zhtoday}

\begin{document}
\author{
    \begin{tabular}[t]{c}
        2017211305 班 E 组 \\
        于海鑫\ 徐翔\ 赵泉斌\ 郭朝宇\ 郭璐
    \end{tabular}
}
\maketitle

\tableofcontents

\section{文档介绍}

\subsection{文档目的}
该文档主要目的在于建立用例模型。即根据已经确定的需求分析来描述用户以及各个子功能系统之间的交互场景。 对于每一个场景建立相应的用例模型， 软件开发人员应当根据此模型来进行软件的详细设计与开发。

\subsection{文档范围}
该文档围绕分布式温控系统展开，详细地描述分布式温控系统的用例图、用例说明以及操作契约等。 通过用例图构建出所有可能用例与各个参与者之间的框架结构关系， 然后对每一个交互场景进行详细描述和分析。

\subsection{读者对象}

\begin{itemize}
    \item 用户
    \item 设计人员
    \item 编码人员和测试人员等
\end{itemize}

\subsection{参考文献}

\begin{itemize}
    \item 《\emph{软件工程模型与方法}》 肖丁等\ 北京邮电大学出版社
    \item 《\emph{用户需求说明书}》\ 2017211305 班 E 组
\end{itemize}

\subsection{人员分工}

\begin{center}
    \begin{tabular}{cc}
        \toprule
        \textbf{组员} & \textbf{分工}                        \\
        \midrule
        于海鑫        & 整合用例模型                         \\
        郭朝宇        & 负责入住客户用例模型                 \\
        赵泉斌        & 负责前台人员用例模型                 \\
        郭璐          & 负责维修人员用例模型                 \\
        徐翔          & 负责财务人员用例模型以及公有用例模型 \\
        \bottomrule
    \end{tabular}
\end{center}

\section{角色定义}

\begin{center}
    \begin{tabular}{cc}
        \toprule
        \textbf{角色名称} & \textbf{角色职责}                        \\
        \midrule
        入住客户          & 入住酒店，自助调节空调状态，支付空调费用 \\
        前台人员          & 协助客户办理入住、退房手续               \\
        维修人员          & 监控各房间空调状态，负责空调总机的开关机 \\
        财务人员          & 查看温控报表                             \\
        \bottomrule
    \end{tabular}
\end{center}

\section{用例定义：公有用例}

\subsection{注册账号}
\subsubsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.5\textwidth]{fig/276005.png}
    \caption{用例图：注册账号}
    \label{fig:276005}
\end{figure}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276006.png}
    \caption{系统顺序图：注册账号}
    \label{fig:276006}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{register(type, user\_name, password)}} \\
        \hline
        交叉引用                  & 注册账号                                                         \\
        \hline
        前置条件                  & 操作者想要在系统上注册账号                                       \\
        \hline
        \multirow{4}{*}{后置条件} & 一个新的（概念类）账号被创建                                     \\
        \cline{2-2}
                                  & 账号与操作者（客户、前台人员、维修人员、财务人员）建立关联       \\
        \cline{2-2}
                                  & 账号与温控计费系统建立关联                                       \\
        \cline{2-2}
                                  & 账号的属性初始化：类型，用户名，密码等                           \\
        \hline
    \end{tabular}
\end{center}

\subsection{登入系统}
\subsubsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.5\textwidth]{fig/276007.png}
    \caption{用例图：登入系统}
    \label{fig:276007}
\end{figure}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276008.png}
    \caption{系统顺序图：登入系统}
    \label{fig:276008}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{login\_in(user\_name, password)}} \\
        \hline
        交叉引用                  & 登入系统                                                    \\
        \hline
        前置条件                  & 操作者想要登入温控计费系统                                  \\
        \hline
        \multirow{1}{*}{后置条件} & 用户被赋予相应权限                                          \\
        \hline
    \end{tabular}
\end{center}

\subsection{登出系统}
\subsubsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.5\textwidth]{fig/276009.png}
    \caption{用例图：登出系统}
    \label{fig:276009}
\end{figure}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276010.png}
    \caption{系统顺序图：登出系统}
    \label{fig:276010}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{login\_out(user\_name)}} \\
        \hline
        交叉引用                  & 登出系统                                           \\
        \hline
        前置条件                  & 操作者想要登出温控计费系统                         \\
        \hline
        \multirow{1}{*}{后置条件} & 登出的IP被删除相应权限                             \\
        \hline
    \end{tabular}
\end{center}

\subsection{生成使用账单}
\subsubsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.5\textwidth]{fig/276003.png}
    \caption{用例图：生成使用账单}
    \label{fig:276003}
\end{figure}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276004.png}
    \caption{系统顺序图：生成使用账单}
    \label{fig:276004}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{create\_bill(room\_id)}}       \\
        \hline
        交叉引用                  & 生成使用账单                                             \\
        \hline
        前置条件                  & 操作者请求查看使用账单                                   \\
        \hline
        \multirow{4}{*}{后置条件} & 一个新的（概念类）使用账单被创建                         \\
        \cline{2-2}
                                  & 使用账单与操作者（客户、前台人员、财务人员）建立关联     \\
        \cline{2-2}
                                  & 使用账单与温控计费系统建立关联                           \\
        \cline{2-2}
                                  & 使用账单的属性初始化：账单编号，房间号，使用时间，费用等 \\
        \hline
    \end{tabular}
\end{center}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{delete\_bill(room\_id)}}           \\
        \hline
        交叉引用                  & 删除使用账单                                                 \\
        \hline
        前置条件                  & 操作者请求删除使用账单                                       \\
        \hline
        \multirow{3}{*}{后置条件} & 一个（概念类）使用账单被删除                                 \\
        \cline{2-2}
                                  & 使用账单与操作者（客户、前台人员、财务人员）之间的关联被消除 \\
        \cline{2-2}
                                  & 使用账单与温控计费系统之间的关联被消除                       \\
        \hline
    \end{tabular}
\end{center}

\section{用例定义：入住客户用例}

\subsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250001.png}
    \caption{用例图：入住客户用例}
    \label{fig:276001}
\end{figure}

\subsection{查看空调运行状态}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250003.png}
    \caption{系统顺序图：查看空调运行状态}
    \label{fig:250003}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件   & \multicolumn{1}{l|}{\code{clientCheckSate(roomID)}} \\
        \hline
        交叉引用   & 查看运行状态                                        \\
        \hline
        前置条件   & 客户想要查看所在房间空调的状态                      \\
        \hline
        {后置条件} & 返回该房间的空调状态给客户                          \\
        \hline
    \end{tabular}
\end{center}

\subsection{调节模式}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250004.png}
    \caption{系统顺序图：调节模式}
    \label{fig:250004}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件 & \multicolumn{1}{l|}{\code{clientSetMode(roomID, mode)}} \\
        \hline
        交叉引用 & 调节模式                                                \\
        \hline
        前置条件 & 客户想要调节所在房间空调的模式                          \\
        \hline
        \multirow{3}{*}{后置条件}
                 & 将空调模式设置为指定的 mode 值                          \\
        \cline{2-2}
                 & 系统记录下本次操作                                      \\
        \hline
    \end{tabular}
\end{center}


\subsection{调节风速}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250005.png}
    \caption{系统顺序图：调节风速}
    \label{fig:250005}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件 & \multicolumn{1}{l|}{\code{clientSetSpeed(roomID, speed)}} \\
        \hline
        交叉引用 & 调节风速                                                  \\
        \hline
        前置条件 & 客户想要调节所在房间空调的模式                            \\
        \hline
        \multirow{2}{*}{后置条件}
                 & 将空调模式设置为指定的speed值                             \\
        \cline{2-2}
                 & 系统记录下本次操作                                        \\
        \hline
    \end{tabular}
\end{center}



\subsection{调节温度}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250006.png}
    \caption{系统顺序图：调节温度}
    \label{fig:250006}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件 & \multicolumn{1}{l|}{\code{clientSetTemperature(roomID, temperature)}} \\
        \hline
        交叉引用 & 调节温度                                                              \\
        \hline
        前置条件 & 客户想要调节所在房间空调的温度                                        \\
        \hline
        \multirow{2}{*}{后置条件}
                 & 将空调模式设置为指定的 temperature 值                                 \\
        \cline{2-2}
                 & 系统记录下本次操作                                                    \\
        \hline
    \end{tabular}
\end{center}



\subsection{开机}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250007.png}
    \caption{系统顺序图：开机}
    \label{fig:250007}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件   & \multicolumn{1}{l|}{\code{clientTurnOn(roomID)}} \\
        \hline
        交叉引用   & 开机                                             \\
        \hline
        前置条件   & 空调处在可以被开启的状态且客户想要开启空调       \\
        \hline
        {后置条件} & 空调开启                                         \\
        \hline
    \end{tabular}
\end{center}

\subsection{关机}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/250008.png}
    \caption{系统顺序图：关机}
    \label{fig:250008}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件   & \multicolumn{1}{l|}{\code{clientTurnOff(roomID)}} \\
        \hline
        交叉引用   & 关机                                              \\
        \hline
        前置条件   & 空调处在可以被关闭的状态且客户想要关闭空调        \\
        \hline
        {后置条件} & 空调关闭                                          \\
        \hline
    \end{tabular}
\end{center}

\section{用例定义：前台人员用例}

\subsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.5\textwidth]{fig/268001.png}
    \caption{用例图：前台人员用例}
    \label{fig:268001}
\end{figure}


\subsection{办理入住}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/268002.png}
    \caption{系统顺序图：办理入住}
    \label{fig:268002}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件 & \multicolumn{1}{l|}{\code{clientCheckIn(name)}} \\
        \hline
        交叉引用 & 客户登记                                        \\
        \hline
        前置条件 & 前台核实客户身份后,为客户进行登记               \\
        \hline
        \multirow{2}{*}{后置条件}
                 & 客户被分配一个房间, 客户获得该房间使用权        \\
        \cline{2-2}
                 & 客户与房间关联、房间属性进行初始化              \\
        \hline
    \end{tabular}
\end{center}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件   & \multicolumn{1}{l|}{\code{finishCheckIn()}} \\
        \hline
        交叉引用   & 客户登记                                    \\
        \hline
        前置条件   & 前台完成客户登记                            \\
        \hline
        {后置条件} & 修改房间属性isOccupied                      \\
        \hline
    \end{tabular}
\end{center}

\subsection{办理退房}

\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/268003.png}
    \caption{系统顺序图：办理退房}
    \label{fig:268003}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件 & \multicolumn{1}{l|}{\code{clientCheckOut(name, roomID)}} \\
        \hline
        交叉引用 & 客户注销                                                 \\
        \hline
        前置条件 & 客户已在酒店登记                                         \\
        \hline
        \multirow{2}{*}{后置条件}
                 & 系统生成客户的账单,明细单                                \\
        \cline{2-2}
                 & 收回客户对该房间的使用权                                 \\
        \hline
    \end{tabular}
\end{center}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件   & \multicolumn{1}{l|}{\code{printInfo(bill, detail)}} \\
        \hline
        交叉引用   & 客户注销                                            \\
        \hline
        前置条件   & 前台完成对客户注销                                  \\
        \hline
        {后置条件} & 打印出客户账单和详单,账单和详单属性改为isPrinted    \\
        \hline
    \end{tabular}
\end{center}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件   & \multicolumn{1}{l|}{\code{finishCheckOut() }} \\
        \hline
        交叉引用   & 客户注销                                      \\
        \hline
        前置条件   & 前台完成对客户注销                            \\
        \hline
        {后置条件} & 房间属性修改:isEmpty                          \\
        \hline
    \end{tabular}
\end{center}

\section{用例定义：维修人员用例}

\subsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.9\textwidth]{fig/260007.png}
    \caption{用例图：控制空调状态}
    \label{fig:260001}
\end{figure}


\subsection{控制空调状态}
\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/260006.png}
    \caption{系统顺序图：控制空调状态}
    \label{fig:260003}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{set(room\_id, con\_id, state)}} \\
        \hline
        交叉引用                  & 设置空调其他状态                                          \\
        \hline
        前置条件                  & 成功登录酒店管理系统                                      \\
        \hline
        \multirow{4}{*}{后置条件} & 接通空调电源                                              \\
        \cline{2-2}
                                  & 设置工作模式                                              \\
        \cline{2-2}
                                  & 确认各项参数无误                                          \\
        \cline{2-2}
                                  & 启动空调                                                  \\
        \hline
    \end{tabular}
\end{center}

\subsection{监控空调状态}
\subsubsection{系统顺序图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/260003.png}
    \caption{系统顺序图：监控空调状态}
    \label{fig:260003}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{manage(room\_id,con\_id,state)}} \\
        \hline
        交叉引用                  & 初始化空调状态                                             \\
        \hline
        前置条件                  & 成功登录酒店管理系统                                       \\
        \hline
        \multirow{2}{*}{后置条件} & 启动监控设备                                               \\
        \cline{2-2}
                                  & 从空调获取各个房间的状态信息并显示到监控屏幕               \\
        \hline
    \end{tabular}
\end{center}

\section{用例定义：财务人员用例}

\subsection{用例图}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276011.png}
    \caption{用例图：财务人员用例}
    \label{fig:276011}
\end{figure}

\subsection{查看日报}

\subsubsection{系统顺序图}
\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276012.png}
    \caption{系统顺序图：查看日报}
    \label{fig:276002}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{show\_daily(time\_start, time\_end)}}                                                        \\
        \hline
        交叉引用                  & 查看日报                                                                                                               \\
        \hline
        前置条件                  & 财务人员登入温控计费系统，要求查看日报                                                                                 \\
        \hline
        \multirow{4}{*}{后置条件} & 一个新的（概念类）日报被创建                                                                                           \\
        \cline{2-2}
                                  & 日报与财务人员建立关联                                                                                                 \\
        \cline{2-2}
                                  & 日报与温控计费系统建立关联                                                                                             \\
        \cline{2-2}
                                  & 日报的属性初始化：日报编号、房间号、开关次数、调度次数、详单条数、调温次数、调风次数、请求时长、总费用、折线图、饼图等 \\
        \hline
    \end{tabular}
\end{center}


\subsection{查看周报}

\subsubsection{系统顺序图}
\begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{fig/276013.png}
    \caption{系统顺序图：查看周报}
    \label{fig:276002}
\end{figure}

\subsubsection{操作契约}

\begin{center}
    \begin{tabular}{|>{\centering}m{0.15\textwidth}|m{0.7\textwidth}|}
        \hline
        系统事件                  & \multicolumn{1}{l|}{\code{show\_weekly(time\_start, time\_end)}}                                                       \\
        \hline
        交叉引用                  & 查看周报                                                                                                               \\
        \hline
        前置条件                  & 财务人员登入温控计费系统，要求查看周报                                                                                 \\
        \hline
        \multirow{4}{*}{后置条件} & 一个新的（概念类）周报被创建                                                                                           \\
        \cline{2-2}
                                  & 周报与财务人员建立关联                                                                                                 \\
        \cline{2-2}
                                  & 周报与温控计费系统建立关联                                                                                             \\
        \cline{2-2}
                                  & 周报的属性初始化：周报编号、房间号、开关次数、调度次数、详单条数、调温次数、调风次数、请求时长、总费用、折线图、饼图等 \\
        \hline
    \end{tabular}
\end{center}


\end{document}